function t_sldsInit(t, e) { var s = t_slds__getRec(t); if (s) { var r = s.querySelector(".t-slds__items-wrapper"), i; if (r) if (!r.getAttribute("data-slider-initialized")) { var a = r.classList.contains("js-feed-container"), l = s.querySelectorAll(".t-slds__item:not(.t-slds__item_dummy)"); if (l) { e && e.randomSort && (l = t_slds_randomSortElements(l)); var d = l.length, o = l[0], n = l[l.length - 1], c = window.innerWidth, _ = parseInt(r.getAttribute("data-slider-items-in-row"), 10) || 0, u = r.getAttribute("data-slider-with-cycle"), p = parseFloat(r.getAttribute("data-slider-transition")), f; if (Array.prototype.forEach.call(l, (function (t, e) { t.setAttribute("data-slide-index", e + 1) })), "true" !== r.getAttribute("data-slider-stop")) { p || 0 === p || (p = 300), isNaN(p) && r.setAttribute("data-slider-transition", "300"), r.classList.contains("t-slds_animated-fast") || r.classList.contains("t-slds_animated-slow") || r.classList.contains("t-slds_animated-none") || r.classList.add("t-slds_animated-fast"); var m = _; t_slds_setItemsInRow(t), t_slds_changeImageUrl(t); var y = 8 === document.documentMode || 9 === document.documentMode; y && (r.classList.remove("t-slds_animated-fast"), r.classList.remove("t-slds_animated-slow"), r.classList.add("t-slds_animated-none"), r.classList.add("t-slds_ie"), r.setAttribute("data-slider-correct-height", "true"), r.setAttribute("data-slider-items-in-row", 1)), r.setAttribute("data-slider-initialized", "true"), r.getAttribute("data-slider-totalslides") || r.setAttribute("data-slider-totalslides", d); var v = 1, g = r.getAttribute("data-slider-pos"); g ? v = parseInt(g, 10) : r.setAttribute("data-slider-pos", 1), r.setAttribute("data-slider-cycle", ""), r.setAttribute("data-slider-animated", ""), a || t_slds__createDummies(o, n, r), _ = parseInt(r.getAttribute("data-slider-items-in-row"), 10) || 0; var h = s.querySelectorAll(".t-slds__arrow_wrapper-right"); h.length && Array.prototype.forEach.call(h, (function (t) { t.style.display = "false" === u && d - _ <= 0 ? "none" : "" })), a || t_slds_SliderWidth(t), "true" == r.getAttribute("data-slider-correct-height") && t_slds_SliderHeight(t), t_slds_SliderArrowsHeight(t), t_slds_ActiveSlide(t, v, d), t_slds_ActiveCaption(t, v, d), a ? c > 960 && ("true" === r.getAttribute("data-feeds-posts-loaded") ? (t_slds__initFeedsSlider(t, s, e), t_slds_initSliderControls(t, e)) : document.addEventListener("feedsLoadPosts", (function () { t_slds__initFeedsSlider(t, s, e), t_slds_initSliderControls(t, e) }))) : (y || t_slds_onHammerLoad("Hammer", (function () { t_slds_initSliderSwipe(t, d, c) })), t_slds_initSliderControls(t, e), t_slds_updateSlider(t)), r.getAttribute("data-slider-timeout") > 0 ? t_slds_initAutoPlay(t, v, d, e) : r.addEventListener("slideAutoplayTimerReady", (function () { r.getAttribute("data-slider-timeout") > 0 && t_slds_initAutoPlay(t, v, d, e) })), s.querySelectorAll(".t-slds__item-loaded").length < d + 2 && t_slds_UpdateImages(t, v), "yes" == r.getAttribute("data-slider-arrows-nearpic") && t_slds_positionArrows(t); var b = s.querySelectorAll(".t-slds"); b.length && Array.prototype.forEach.call(b, (function (t) { t.style.visibility = "" })), t_slds__setTabindexForFocusableElements(t), s.removeEventListener("displayChanged", t_slds_updateOnDisplayChange), s.addEventListener("displayChanged", t_slds_updateOnDisplayChange(t, m)), a && (s.removeEventListener("displayChanged", t_slds_updateFeedsSliderOnResize), s.addEventListener("displayChanged", (function () { t_slds_updateFeedsSliderOnResize(t, s, e) }))), window.addEventListener("resize", t_throttle((function () { setTimeout((function () { t_slds_setItemsInRow(t, m), t_slds_updateSlider(t), t_slds_positionArrows(t), a && t_slds_updateFeedsSliderOnResize(t, s, e) }), 100) }))), window.t_slds__isiOS && ("complete" === document.readyState ? t_slds__hideMobileSlides(s.querySelector(".t-slds__item_active")) : window.addEventListener("load", (function () { t_slds__hideMobileSlides(s.querySelector(".t-slds__item_active")) }))), window.addEventListener("load", (function () { "true" == r.getAttribute("data-slider-correct-height") && t_slds_UpdateSliderHeight(t), t_slds_UpdateSliderArrowsHeight(t) })), setTimeout((function () { t_slds_UpdateSliderArrowsHeight(t) }), 500); var A = document.querySelector("#allrecords"); A && A.addEventListener("allRecPaddingInit", (function () { t_slds_updateSlider(t) })), document.removeEventListener("click", t_slds__removeAutoplayByVideo), document.addEventListener("click", t_slds__removeAutoplayByVideo) } } } } } function t_slds__removeAutoplayByVideo(t) { var e = t.target.closest(".t-slds__item"), s = null == e ? void 0 : e.querySelector("[data-slider-video-type], [data-videolazy-type], iframe"); if (s) { var r = s.closest(".t-slds__items-wrapper"), i; if (r) r.getAttribute("data-slider-interval-id") && (r.setAttribute("data-slider-stopped", "yes"), r.setAttribute("data-slider-stopped-by-video", "y")) } } function t_slds__initFeedsSlider(t, e) { var s = e.querySelector(".t-slds__items-wrapper"); if (s) { var r = e.querySelectorAll(".t-slds__item:not(.t-slds__item_dummy)"), i = parseInt(s.getAttribute("data-slider-totalslides"), 10) || 0, a = r[0], l = r[r.length - 1], d = s.getAttribute("data-slider-with-cycle"); t_slds__createDummies(a, l, s), t_slds_updateSlider(t); var o = parseInt(s.getAttribute("data-slider-items-in-row"), 10) || 0, n = e.querySelectorAll(".t-slds__arrow_wrapper-right"); n.length && Array.prototype.forEach.call(n, (function (t) { t.style.display = "false" === d && i - o <= 0 ? "none" : "" })), "true" == s.getAttribute("data-slider-correct-height") && t_slds_SliderHeight(t) } } function t_slds__createDummies(t, e, s) { var r, i = s.querySelectorAll(".t-slds__item:not(.t-slds__item_dummy)").length, a = parseInt(s.getAttribute("data-slider-items-in-row"), 10) || 0, l = s.getAttribute("data-slider-with-cycle"), d = s.classList.contains("js-feed-container"), o = !1, n = !1, c, _; if (t && (c = t.querySelector('[data-zoomable="yes"]')) && (o = !0, c.classList.contains("t-zoomable") && c.classList.remove("t-zoomable"), c.removeAttribute("data-zoomable")), e && (_ = e.querySelector('[data-zoomable="yes"]')) && (n = !0, _.classList.contains("t-zoomable") && _.classList.remove("t-zoomable"), _.removeAttribute("data-zoomable")), e && 0 == s.querySelectorAll('.t-slds__item[data-slide-index="0"]').length) { var u = e.cloneNode(!0); u.setAttribute("data-slide-index", "0"), u.setAttribute("aria-hidden", "true"); var p = t.parentNode; p.insertBefore(u, t); var f = p.querySelectorAll('[data-slide-index="0"] [field]'); f.length && Array.prototype.forEach.call(f, (function (t) { t.removeAttribute("field") })) } if (!d && t && !s.querySelector('.t-slds__item[data-slide-index="' + (i + 1) + '"]')) { var m = t.cloneNode(!0); if (m.setAttribute("data-slide-index", i + 1), m.classList.remove("t-slds__item_active"), m.setAttribute("aria-hidden", "true"), e.insertAdjacentElement("afterend", m), e.classList.add("t-slds__item-loaded"), a > 0 && "true" === l) for (var y = t, v = e, g = 0; g < a - 1; g++) { var h = y.nextElementSibling.cloneNode(!0); h.setAttribute("data-slide-index", i + g + 1), v.nextElementSibling.insertAdjacentElement("afterend", h), v = v.nextElementSibling, y = y.nextElementSibling } } o && c && (c.classList.add("t-zoomable"), c.setAttribute("data-zoomable", "yes")), n && _ && (_.classList.add("t-zoomable"), _.setAttribute("data-zoomable", "yes")) } function t_slds__hideMobileSlides(t) { if (t) { var e = t.closest(".t-slds__items-wrapper"), s = e && getComputedStyle(e); if (!s || "scroll" !== s.overflowX || "flex" !== s.display) { var r = Array.prototype.slice.call(e.querySelectorAll(".t-slds__item:not(.t-slds__item_dummy)")), i = document.documentElement.clientWidth > 960 ? 5 : 3; if (!(r.length <= 2 * i)) { for (var a = t.getAttribute("data-slide-index"), l = [a = parseInt(a, 10)], d = 1; d < i; d++)a + d <= r.length ? l.push(a + d) : l.push(d), a - d > 0 ? l.push(a - d) : l.push(r.length + 1 - d); var o = "t-slds__item-innactive"; r.forEach((function (t) { var e; l.some((function (e) { return parseInt(t.getAttribute("data-slide-index"), 10) === e })) ? t.classList.remove(o) : t.classList.add(o) })) } } } } function t_slds_updateOnDisplayChange(t, e) { t_throttle((function () { t_slds_setItemsInRow(t, e), t_slds_updateSlider(t), t_slds_positionArrows(t) })) } function t_slds_updateFeedsSliderOnResize(t, e, s) { var r = e.querySelector(".t-slds__items-wrapper"), i; r && (r.classList.contains("js-feed-container") && (window.innerWidth > 960 ? "true" === r.getAttribute("data-feeds-posts-loaded") ? (t_slds__initFeedsSlider(t, e, s), t_slds_initSliderControls(t, s)) : document.addEventListener("feedsLoadPosts", (function () { t_slds__initFeedsSlider(t, e, s), t_slds_initSliderControls(t, s) })) : r.style.transform = "translateX(0)")) } function t_slds_setItemsInRow(t, e) { var s = t_slds__getRec(t); if (s) { var r = s.querySelector(".t-slds__items-wrapper"), i, a; if (r) (r.getAttribute("data-slider-items-in-row") || 0) && (window.innerWidth <= 960 && (a = 2), window.innerWidth <= 640 && (a = 1), window.innerWidth > 960 && (a = e)), a && r.setAttribute("data-slider-items-in-row", a) } } function t_slds_initSliderControls(t, e) { var s = t_slds__getRec(t); if (s) { var r = s.querySelector(".t-slds__items-wrapper"); if (r) { var i = r.getAttribute("data-slider-items-in-row") || 0, a = s.querySelector(".t-slds__container .t-slds__item"), l = s.querySelector(".t-slds__container"), d = i > 0 && a && l ? a.offsetWidth : l.offsetWidth, o; if ("true" !== r.getAttribute("data-slider-stop")) { r.style.transform = "translateX(-" + d + "px)"; var n = s.querySelectorAll(".t-slds__arrow_wrapper"); n.length && Array.prototype.forEach.call(n, (function (i) { i.addEventListener("click", (function () { var i = t_slds_getCurrentTranslate(s), a = r.getAttribute("data-slider-animated"), l = parseFloat(r.getAttribute("data-slider-pos")), d = parseFloat(r.getAttribute("data-slider-totalslides")), o = r.getAttribute("data-slider-with-cycle"), n = "", c; "" == a && (r.setAttribute("data-slider-animated", "yes"), "left" === this.getAttribute("data-slide-direction") ? "false" == o && 1 == l ? l = 1 : l-- : "false" == o && l == d ? l = d : l++, r.setAttribute("data-slider-pos", l), l != d + 1 && 0 != l || (n = "yes"), r.setAttribute("data-slider-cycle", n), t_slideMoveWithoutAnimation(t, !1, e, i)); t_slds_updateSlider(t) })) })); var c = s.querySelectorAll(".t-slds__bullet"); c.length && Array.prototype.forEach.call(c, (function (i) { i.addEventListener("click", (function () { var a = parseInt(i.getAttribute("data-slide-bullet-for"), 10), l; if (parseInt(r.getAttribute("data-slider-pos"), 10) !== a) { var d = t_slds_getCurrentTranslate(s); r.setAttribute("data-slider-pos", a), t_slideMoveWithoutAnimation(t, !1, e, d), t_slds_updateSlider(t) } })) })) } } } } function t_slds_animate(t, e, s) { var r = performance.now(); requestAnimationFrame((function i(a) { var l = (a - r) / s; l > 1 && (l = 1); var d = t(l); e(d), l < 1 ? requestAnimationFrame(i) : "y" !== window.lazy && "yes" !== document.querySelector("#allrecords").getAttribute("data-tilda-lazy") || t_slds_onHammerLoad("t_lazyload_update", (function () { t_lazyload_update() })) })) } function t_slide_MoveAnimation(t, e, s, r) { if (t) { t.style.transition = "height ease-in-out .5s, transform ease-in-out 0s"; var i = -Math.abs(e * s), a = -parseInt(getComputedStyle(t).transform.match(/\d+/)[0]), l = a - i; 0 !== l && t_slds_animate((function (t) { return t }), (function (e) { t.style.transform = "translateX(" + (a - l * e) + "px)" }), r) } } function t_slideMoveWithoutAnimation(t, e, s) { var r = t_slds__getRec(t); if (r) { var i = r.querySelector(".t-slds__items-wrapper"); if (i) { var a = parseFloat(i.getAttribute("data-slider-pos")), l, d = (i.getAttribute("data-slider-items-in-row") || 0) > 0 ? r.querySelector(".t-slds__container .t-slds__item").offsetWidth : r.querySelector(".t-slds__container").offsetWidth, o = parseFloat(i.getAttribute("data-slider-totalslides")), n = i.classList.contains("t-slds_animated-none"); a > o + 1 && (a = 1); var c = r.classList.contains("t396__elem"), _ = t_slds_getEventsForZeroBlock(), u = _.moveSlideStartEvent, p = _.moveSlideEndEvent; if (c && r.dispatchEvent(u), n) { var f = r.querySelector(".t-slds__item_active"), m = r.querySelectorAll(".t-slds__item"); if (f && 0 === r.querySelectorAll(".t-slds__item_dummy").length) { var y = f.cloneNode(!0), v; y.classList.add("t-slds__item_dummy"), y.style.position = "absolute", y.style.left = d * a + "px", i.appendChild(y), (v = r.classList.contains("js-product") ? r : r.querySelector(".t-catalog, .t-store") || r.querySelector(".js-product")) ? (t_slds_fadeOut(y, 150, (function () { null !== y.parentNode && y.parentNode.removeChild(y) })), Array.prototype.forEach.call(m, (function (t) { t_slds_fadeIn(t, 150) }))) : (Array.prototype.forEach.call(m, (function (t) { t.style.opacity = 0 })), t_slds_fadeOut(y, 400, (function () { null !== y.parentNode && y.parentNode.removeChild(y) })), setTimeout((function () { Array.prototype.forEach.call(m, (function (t) { t_slds_fadeIn(t) })), c && r.dispatchEvent(p) }), 50)) } i.classList.add("t-slds_animated-cancel") } t_slideMove(t, e, s), n && i.classList.remove("t-slds_animated-cancel"), c && r.dispatchEvent(p) } } } function t_slideMoveInstantly(t, e, s) { var r = t_slds__getRec(t); if (r) { var i = r.querySelector(".t-slds__items-wrapper"); if (i) { var a = parseFloat(i.getAttribute("data-slider-pos")), l, d = (i.getAttribute("data-slider-items-in-row") || 0) > 0 ? r.querySelector(".t-slds__container .t-slds__item").offsetWidth : r.querySelector(".t-slds__container").offsetWidth, o = parseFloat(i.getAttribute("data-slider-totalslides")), n = i.classList.contains("t-slds_animated-none"); if (a > o + 1 && (a = 1), n) { var c = r.querySelector(".t-slds__item_active"); if (c && 0 === r.querySelectorAll(".t-slds__item_dummy").length) { var _ = c.cloneNode(!0); _.classList.add("t-slds__item_dummy"), _.style.position = "absolute", _.style.left = d * a + "px", i.appendChild(_), t_slds_fadeOut(_, 400, (function () { null !== _.parentNode && _.parentNode.removeChild(_) })) } i.classList.add("t-slds_animated"), i.classList.add("t-slds_animated-cancel") } else i.classList.add("t-slds_animated"), i.classList.add("t-slds_animated-cancel"); t_slideMove(t, e, s), i.classList.remove("t-slds_animated"), i.classList.remove("t-slds_animated-cancel") } } } function t_slideMove(t, e, s) { var r = t_slds__getRec(t); if (r) { var i = r.querySelector(".t-slds__items-wrapper"); if (i) { var a = r.querySelectorAll(".t-slds__item:not(.t-slds__item_dummy)"), l = i.classList.contains("js-feed-container"), d = parseInt(i.getAttribute("data-slider-items-in-row") || 0), o = parseInt(i.getAttribute("data-feed-show-count") || 0), n = d > 0 ? r.querySelector(".t-slds__container .t-slds__item").offsetWidth : r.querySelector(".t-slds__container").offsetWidth, c = parseFloat(i.getAttribute("data-slider-transition")), _ = parseFloat(i.getAttribute("data-slider-pos")), u = parseFloat(i.getAttribute("data-slider-totalslides")), p = i.getAttribute("data-slider-cycle"), f = i.classList.contains("t-slds_animated-none"), m = i.getAttribute("data-slider-timeout") > 0, y = r.querySelector(".t-slds__arrow_wrapper-right"), v = r.querySelector(".t-slds__arrow_wrapper-left"), g; "off" === i.getAttribute("aria-live") && i.setAttribute("aria-live", "polite"); var h = 0; if (/^((?!chrome|android).)*safari/i.test(navigator.userAgent)) { var b = navigator.appVersion.match(/Version\/(\d+)\.(\d+)\.?(\d+)? Safari/); null !== b && (h = parseInt(b[1], 10)) } var A = !!navigator.userAgent.match("CriOS"), S; if (c || 0 === c || (c = 300), _ > u + 1 && (_ = 1, i.setAttribute("data-slider-pos", 1)), "true" !== i.getAttribute("data-slider-stop")) { if (y) if (l) { var w = a[a.length - 1], E = parseInt(w.getAttribute("data-slide-index"), 10); if (d < u && t_slds_fadeIn(y, 300), E < u && d > 0 && (_ == E - o + 1 || E === o)) { var q = document.createEvent("Event"); q.initEvent("feedsLastSlide", !0, !0), i.dispatchEvent(q), document.addEventListener("feedsLoadSlide", (function () { t_slds_updateSlider(t), "function" == typeof t_animate__startAnimation && t_animate__startAnimation() })), t_slds_fadeIn(y, 300) } else E === u && _ === u - d + 1 && t_slds_fadeOut(y, 300) } else "false" == i.getAttribute("data-slider-with-cycle") && (_ == u || d > 1 && _ == u - d + 1) ? t_slds_fadeOut(y, 300) : t_slds_fadeIn(y, 300); v && ("false" == i.getAttribute("data-slider-with-cycle") && 1 == _ ? t_slds_fadeOut(v, 300) : t_slds_fadeIn(v, 300)), i.classList.add("t-slds_animated"), h >= 13 && A && !f ? t_slide_MoveAnimation(i, _, n, c) : i.style.transform = "translateX(-" + n * _ + "px)", t_triggerEvent(i, "slideChangeStart"), setTimeout((function () { i.classList.remove("t-slds_animated"), i.setAttribute("data-slider-animated", ""), "yes" == (p = i.getAttribute("data-slider-cycle")) && (_ == u + 1 && (_ = 1), 0 == _ && (_ = u), h >= 13 && A && !f ? t_slide_MoveAnimation(i, _, n, 0) : i.style.transform = "translateX(-" + n * _ + "px)", !0 !== f && t_slds_ActiveSlide(t, _, u, s), i.setAttribute("data-slider-pos", _)), ("y" === window.lazy || document.querySelector("#allrecords") && "yes" === document.querySelector("#allrecords").getAttribute("data-tilda-lazy")) && t_slds_onHammerLoad("t_lazyload_update", (function () { t_lazyload_update() })), !e && m && t_slds_initAutoPlay(t, _, u, s) }), c), t_slds_ActiveBullet(t, _, u, s), t_slds_ActiveSlide(t, _, u), "true" == i.getAttribute("data-slider-correct-height") && t_slds_SliderHeight(t), t_slds_SliderArrowsHeight(t), t_slds_ActiveCaption(t, _, u), r.querySelectorAll(".t-slds__item-loaded").length < u + 2 && t_slds_UpdateImages(t, _), t_triggerEvent(i, "slideChangeEnd") } } } } function t_slds_updateSlider(t) { var e = t_slds__getRec(t); if (e) { t_slds_SliderWidth(t); var s = e.querySelector(".t-slds__items-wrapper"); if (s) { var r = parseInt(s.getAttribute("data-slider-items-in-row"), 10) || 1, i = e.querySelector(".t-slds__container .t-slds__item"), a = e.querySelector(".t-slds__container"), l = r > 0 && a && i ? i.offsetWidth : a.offsetWidth, d = parseInt(s.getAttribute("data-slider-pos"), 10), o = parseInt(s.getAttribute("data-slider-totalslides"), 10), n = s.getAttribute("data-slider-with-cycle"), c = e.querySelector(".t-slds__arrow_wrapper-right"); if (d > o + 1 && (d = 1, s.setAttribute("data-slider-pos", 1)), c && "false" === n) { var _, u = o - r <= 0 || d + r - 1 === o; c.style.display = u ? "none" : "" } s.style.transform = "translateX(-" + l * d + "px)", "true" == s.getAttribute("data-slider-correct-height") && t_slds_UpdateSliderHeight(t), t_slds_UpdateSliderArrowsHeight(t), "y" === s.getAttribute("data-slider-stopped-by-video") && s.setAttribute("data-slider-stopped-by-video", "") } } } function t_slds_UpdateImages(t, e) { var s = t_slds__getRec(t); if (s) { var r = s.querySelector('.t-slds__item[data-slide-index="' + e + '"]'); r && (r.classList.add("t-slds__item-loaded"), r.nextElementSibling && r.nextElementSibling.classList.add("t-slds__item-loaded"), r.previousElementSibling && r.previousElementSibling.classList.add("t-slds__item-loaded")) } } function t_slds_ActiveCaption(t, e, s) { var r = t_slds__getRec(t); if (r) { var i = r.querySelectorAll(".t-slds__caption"), a = r.querySelector('.t-slds__caption[data-slide-caption="' + e + '"]'); Array.prototype.forEach.call(i, (function (t) { t.classList.remove("t-slds__caption-active") })), 0 == e ? a = r.querySelector('.t-slds__caption[data-slide-caption="' + s + '"]') : e == s + 1 && (a = r.querySelector('.t-slds__caption[data-slide-caption="1"]')), a && a.classList.add("t-slds__caption-active") } } function t_slds_scrollImages(t, e) { var s = t_slds__getRec(t); if (s) { var r = (e < 0 ? "" : "-") + Math.abs(e).toString(); s.querySelector(".t-slds__items-wrapper").style.transform = "translateX(" + r + "px)" } } function t_slds_ActiveBullet(t, e, s, r) { var i; if (r && r.thumbsbulletGallery) { var a = parseInt(r.storeOptions.popup_opts.columns), l = +r.storeOptions.slider_slidesOpts.ratio; "t_store_prodPopup_gallery_calcMaxThumbsCount" in window ? i = t_store_prodPopup_gallery_calcMaxThumbsCount(a, l, 60, 10) : "t_catalog_prodPopup_gallery_calcMaxThumbsCount" in window && (i = t_catalog_prodPopup_gallery_calcMaxThumbsCount(a, l, 60, 10)) } var d = t_slds__getRec(t); if (d) { var o = d.querySelectorAll(".t-slds__bullet"), n = d.querySelector('.t-slds__bullet[data-slide-bullet-for="' + e + '"]'); if (Array.prototype.forEach.call(o, (function (t) { t.classList.remove("t-slds__bullet_active"); var e = t.querySelector(".t-slds__bullet_body"); e && e.removeAttribute("aria-current") })), r && r.thumbsbulletGallery && e >= i && e != s + 1 || s >= i && 0 == e ? n = d.querySelector('.t-slds__bullet[data-slide-bullet-for="' + i + '"]') : 0 == e ? n = d.querySelector('.t-slds__bullet[data-slide-bullet-for="' + s + '"]') : e == s + 1 && (n = d.querySelector('.t-slds__bullet[data-slide-bullet-for="1"]')), n) { n.classList.add("t-slds__bullet_active"); var c = n.querySelector(".t-slds__bullet_body"); c && c.setAttribute("aria-current", !0) } } } function t_slds_ActiveSlide(t, e, s) { var r = t_slds__getRec(t); if (r) { var i = r.querySelector(".t-slds__items-wrapper"), a = r.querySelectorAll(".t-slds__item"), l = r.querySelector('.t-slds__item[data-slide-index="' + e + '"]'), d = !!i && i.classList.contains("t-slds_animated-none"), o = r.querySelectorAll(".t-video-lazyload"); if (o.length) t_onFuncLoad("t_video__getPlayer", (function () { o.forEach((function (t) { var e; if ("false" !== t.getAttribute("data-videolazy-load")) { var s = t.closest(".t-slds__item:not(.t-slds__item_dummy)"); if (s) { var r = t_video__getPlayer(s); r ? r.pause() : t_slds__proccessVideo(s).then((function (t) { return t.pause() })).catch((function (t) { return t })) } } })) })); else { var n = r.querySelectorAll("iframe"), c = r.querySelectorAll("video"); Array.prototype.forEach.call(n, (function (t) { t.src && (-1 !== t.src.indexOf("&enablejsapi=1") && t.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}', "*"), -1 === t.src.indexOf("vimeo") || -1 === t.src.indexOf("&amp;api=1") && -1 === t.src.indexOf("&api=1") || t.contentWindow.postMessage('{"method":"pause","value":"true"}', "*")) })), Array.prototype.forEach.call(c, (function (t) { t.pause() })) } if (Array.prototype.forEach.call(a, (function (t) { t.classList.remove("t-slds__item_active"), t.setAttribute("aria-hidden", "true") })), 0 == e && !1 === d) r.querySelector('.t-slds__item[data-slide-index="' + s + '"]').classList.add("t-slds__item_active"), r.setAttribute("aria-hidden", "false"); else if (0 == e && !0 === d) l = r.querySelector('.t-slds__item[data-slide-index="' + s + '"]'); else if (e == s + 1 && !1 === d) { var _ = r.querySelector('.t-slds__item[data-slide-index="1"]'); _ && (_.classList.add("t-slds__item_active"), _.setAttribute("aria-hidden", "false")) } else e == s + 1 && !0 === d && (l = r.querySelector('.t-slds__item[data-slide-index="1"]')); l && (l.classList.add("t-slds__item_active"), l.setAttribute("aria-hidden", "false")), window.t_slds__isiOS && t_slds__hideMobileSlides(l), t_slds__setTabindexForFocusableElements(t) } } function t_slds__setTabindexForFocusableElements(t) { var e = t_slds__getRec(t); if (e) { var s = e.querySelector(".t-slds__items-wrapper"), r = e.querySelector(".t-slds__item_active"); if (r) { var i = 'a, button, input:not([type="hidden"]), select, textarea, video, iframe', a = s.querySelectorAll(i); Array.prototype.forEach.call(a, (function (t) { t.setAttribute("tabindex", "-1") })); var l = r.querySelectorAll(i); Array.prototype.forEach.call(l, (function (t) { t.setAttribute("tabindex", "0") })) } } } function t_slds_SliderWidth(t) { var e = t_slds__getRec(t); if (e) { var s = e.querySelector(".t-slds__container"); if (s) { var r = getComputedStyle(s), i = parseInt(r.paddingLeft) || 0, a = parseInt(r.paddingRight) || 0, l = s.clientWidth - (i + a), d = e.querySelectorAll(".t-slds__item:not(.t-slds__item_dummy)").length, o = e.querySelector(".t-slds__items-wrapper"), n; if ("true" != o.getAttribute("data-slider-stop")) { var c = 0; o && (c = o.getAttribute("data-slider-items-in-row"), o.style.width = l * d + "px"), window.innerWidth <= 640 ? c = 1 : window.innerWidth <= 960 && c > 1 && (c = 2); var _ = c > 1 ? l / c : l; if (_ > 0) { var u = e.querySelectorAll(".t-slds__item"); o && (u = o.querySelectorAll(".t-slds__item")), Array.prototype.forEach.call(u, (function (t) { t.style.width = _ + "px" })) } } } } } function t_slds_SliderHeight(t) { var e = t_slds__getRec(t); if (e) { var s = e.querySelector('.t-slds__items-wrapper:not([data-slider-correct-height="false"])'); if (s) { var r = s.classList.contains("js-feed-container"), i = e.querySelector(".t-slds__item_active"), a; if (i) { var l = parseInt(getComputedStyle(i).paddingTop) || 0, d = parseInt(getComputedStyle(i).paddingBottom) || 0; a = i.clientHeight - (l + d) } a && s && (s.style.height = r ? "" : a + "px") } } } function t_slds_UpdateSliderHeight(t) { var e = t_slds__getRec(t); if (e) { var s = e.querySelector('.t-slds__items-wrapper:not([data-slider-correct-height="false"])'); if (s) { var r = s.classList.contains("js-feed-container"), i = e.querySelector(".t-slds__item_active"), a; if (i) { var l = parseInt(getComputedStyle(i).paddingTop) || 0, d = parseInt(getComputedStyle(i).paddingBottom) || 0; a = i.clientHeight - (l + d) } 0 !== a && s && (s.style.height = r ? "" : a + "px") } } } function t_slds_SliderArrowsHeight(t) { var e = t_slds__getRec(t); if (e) { var s = e.querySelector(".t-slds__item_active"), r = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent), i, a = 0; if (s) { var l; s.querySelector("[data-slider-video-type]") && r && (a = 40); var d = parseInt(getComputedStyle(s).paddingTop) || 0, o = parseInt(getComputedStyle(s).paddingBottom) || 0; i = s.clientHeight - (d + o) - a } var n = e.querySelectorAll(".t-slds__arrow_wrapper"); i && n.length && Array.prototype.forEach.call(n, (function (t) { t.style.height = i + "px"; var e = t.querySelector(".t-slds__arrow"); e && (e.style.marginTop = a / 2 + "px") })), t_slds_fixArrowsInCatalog(e, s, n, r) } } function t_slds_UpdateSliderArrowsHeight(t) { var e = t_slds__getRec(t); if (e) { var s = e.querySelector(".t-slds__item_active"), r = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent), i, a = 0; if (s) { var l; s.querySelector("[data-slider-video-type]") && r && (a = 40); var d = parseInt(getComputedStyle(s).paddingTop) || 0, o = parseInt(getComputedStyle(s).paddingBottom) || 0; i = s.clientHeight - (d + o) - a } var n = e.querySelectorAll(".t-slds__arrow_wrapper"); i && n.length && Array.prototype.forEach.call(n, (function (t) { t.style.height = i + "px"; var e = t.querySelector(".t-slds__arrow"); e && (e.style.marginTop = a / 2 + "px") })), t_slds_fixArrowsInCatalog(e, s, n, r) } } function t_slds_fixArrowsInCatalog(t, e, s, r) { if (e && r && (t.classList.contains("t-catalog__relevants-grid-cont") || t.classList.contains("t-store__relevants-grid-cont"))) { var i = e.querySelector(".js-product-img"); if (i) { var a = window.getComputedStyle(i), l = (parseFloat(a.marginTop) || 0) + (parseFloat(a.marginBottom) || 0), d = Math.ceil(i.offsetHeight + l); Array.prototype.forEach.call(s, (function (t) { var e = t.offsetHeight, s = (d - e) / 2; t.style.top = s + "px", t.style.transform = "translateY(0)" })) } } } function t_slds_initAutoPlay(t, e, s, r) { var i = "object" == typeof t, a = i ? t[0] : document.querySelector("#rec" + t); if (a) { var l = a.querySelector(".t-slds"), d = a.querySelector(".t-slds__items-wrapper"); if (d) { var o = parseFloat(d.getAttribute("data-slider-timeout")), n = "", c = d.getAttribute("data-slider-interval-id"), _ = e, u; if (c && clearInterval(c), "true" !== d.getAttribute("data-slider-stop")) { var p; !/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) && l && (l.addEventListener("mouseover", (function () { d.setAttribute("data-slider-stopped", "yes") })), l.addEventListener("mouseout", (function () { "y" !== d.getAttribute("data-slider-stopped-by-video") && d.setAttribute("data-slider-stopped", "") }))); var f = a.getBoundingClientRect().top + window.pageYOffset, m = f + a.offsetHeight, y, v; window.addEventListener("resize", t_throttle((function () { f = a.getBoundingClientRect().top + window.pageYOffset, m = f + a.offsetHeight }))), void 0 !== document.hidden ? (y = "hidden", v = "visibilitychange") : void 0 !== document.msHidden ? (y = "msHidden", v = "msvisibilitychange") : void 0 !== document.webkitHidden && (y = "webkitHidden", v = "webkitvisibilitychange"), document.addEventListener(v, (function () { if (document[y]) d.setAttribute("data-slider-stopped", "yes"); else { var t = getComputedStyle(a).display, e = window.pageYOffset, s = e + window.innerHeight; f = a.getBoundingClientRect().top + window.pageYOffset, (m = f + a.offsetHeight) > e && f < s && "none" !== t && "y" !== d.getAttribute("data-slider-stopped-by-video") && d.setAttribute("data-slider-stopped", "") } }), !1), 1 === a.length && window.bind("scroll", t_throttle((function () { var t = getComputedStyle(a).display, e = window.pageYOffset, s = e + window.innerHeight; "none" !== t ? (f = a.getBoundingClientRect().top + window.pageYOffset, (m = f + a.offsetHeight) > e && f < s && "y" !== d.getAttribute("data-slider-stopped-by-video") ? d.setAttribute("data-slider-stopped", "") : "" === d.getAttribute("data-slider-stopped") && d.setAttribute("data-slider-stopped", "yes")) : i || d.setAttribute("data-slider-stopped", "yes") }))); var g = setInterval((function () { var e = d.getAttribute("data-slider-stopped"), i = d.getAttribute("data-slider-autoplay-ignore-hover"), l = d.getAttribute("data-slider-touch"), o = t_slds_getCurrentTranslate(a); "yes" != e && "yes" != i && "yes" != l && ("false" == d.getAttribute("data-slider-with-cycle") && _ == s ? _ = s : _++, d.setAttribute("data-slider-pos", _), _ != s + 1 && 0 != _ || (n = "yes"), t_slideMoveWithoutAnimation(t, !0, r, o), t_slds_updateSlider(t), "yes" == n && (_ == s + 1 && (_ = 1), 0 == _ && (_ = s), d.setAttribute("data-slider-pos", _)), d.setAttribute("data-slider-cycle", n)) }), o); d.setAttribute("data-slider-interval-id", g) } } } } function t_slds_positionArrows(t) { var e = t_slds__getRec(t); if (e) { var s = e.querySelector(".t-slds__arrow_container-outside"), r = e.querySelector(".t-slds__item"); if (r) { var i = r.offsetWidth, a = e.querySelector(".t-slds__arrow-left") ? e.querySelector(".t-slds__arrow-left").offsetWidth : 0, l = e.querySelector(".t-slds__arrow-right") ? e.querySelector(".t-slds__arrow-right").offsetWidth : 0; s && (s.style.maxWidth = a + l + i + 120 + "px") } } } function t_slds_initSliderSwipe(t, e, s, r) { var i = t_slds__getRec(t); if (i) { var a = i.querySelector(".t-slds__main"); if (a) { var l = i.querySelector(".t-slds__items-wrapper"); if (l) { var d, o = !1, n = !1, c, _; if ("true" !== l.getAttribute("data-slider-stop")) if ("true" !== l.getAttribute("data-swiper-initialized")) { delete Hammer.defaults.cssProps.userSelect, window.hammer = new Hammer(a, { domEvents: !0, inputClass: Hammer.TouchInput, recognizers: [[Hammer.Pan, { direction: Hammer.DIRECTION_HORIZONTAL }]] }), l.setAttribute("data-swiper-initialized", "true"); var u = function t(e) { window.pageYOffset > i.getBoundingClientRect().bottom + window.pageYOffset || window.pageYOffset + document.documentElement.clientHeight < i.getBoundingClientRect().top + window.pageYOffset ? l.setAttribute(e, "yes") : "y" !== l.getAttribute("data-slider-stopped-by-video") && l.setAttribute(e, "") }, p = "ontouchend" in document ? "data-slider-touch" : "data-slider-stopped", f; if ("IntersectionObserver" in window) new IntersectionObserver((function (t) { var e = t[0]; l.setAttribute(p, e.isIntersecting ? "" : "yes") })).observe(i); else u(p), window.addEventListener("scroll", (function () { o = !0, clearTimeout(d), d = setTimeout((function () { u(p), o = !1 }), 250) })); if (1 != e) { var m = function t(e) { return !n || (e.preventDefault(), !1) }, y = i.classList.contains("t396__elem"), v = t_slds_getEventsForZeroBlock(), g = v.moveSlideStartEvent, h = v.moveSlideEndEvent; window.removeEventListener("touchmove", m, { passive: !1 }), window.addEventListener("touchmove", m, { passive: !1 }), window.hammer.on("pan", (function (e) { if (o) return !1; n = !0, y && i.dispatchEvent(g); var s = i.querySelector(".t-slds__items-wrapper"), a = s.getAttribute("data-slider-items-in-row") || 0, l = a > 1, d = l ? i.querySelector(".t-slds__container .t-slds__item").offsetWidth : i.querySelector(".t-slds__container").offsetWidth, c = parseFloat(s.getAttribute("data-slider-pos")), _ = parseFloat(s.getAttribute("data-slider-totalslides")), u = "", p = e.deltaX, f = 100 / _ * e.deltaX / window.innerWidth, m = 30, v; if ("true" === s.getAttribute("data-slider-stop")) return !1; if (s.setAttribute("data-slider-touch", "yes"), t_slds_scrollImages(t, d * c - p), e.isFinal) { if (e.velocityX > .4) "false" == s.getAttribute("data-slider-with-cycle") && 1 == c ? c = 1 : c--, s.setAttribute("data-slider-pos", c), 0 == c && (u = "yes"), s.setAttribute("data-slider-cycle", u), t_slideMove(t, !1, r); else if (e.velocityX < -.4) { if ("false" == s.getAttribute("data-slider-with-cycle") && (c == _ || l && c == _ - a + 1)) c = l ? _ - a : _; else { var h = i.querySelectorAll(".t-slds__item:not(.t-slds__item_dummy)"), b = h[h.length - 1], A = parseFloat(b.getAttribute("data-slide-index"), 10); if (A < _ && c == A) { var S = document.createEvent("Event"); S.initEvent("feedsLastSlide", !0, !0), s.dispatchEvent(S), document.addEventListener("feedsLoadSlide", (function () { t_slds_updateSlider(t) })) } c++ } s.setAttribute("data-slider-pos", c), c == _ + 1 && (u = "yes"), s.setAttribute("data-slider-cycle", u), t_slideMove(t, !1, r) } else f <= -30 / _ ? ("false" == s.getAttribute("data-slider-with-cycle") && (c == _ || l && c == _ - a + 1) ? c = l ? _ - a : _ : c++, s.setAttribute("data-slider-pos", c), c == _ + 1 && (u = "yes"), s.setAttribute("data-slider-cycle", u), t_slideMove(t, !1, r)) : f >= m / _ ? ("false" == s.getAttribute("data-slider-with-cycle") && 1 == c ? c = 1 : c--, s.setAttribute("data-slider-pos", c), 0 == c && (u = "yes"), s.setAttribute("data-slider-cycle", u), t_slideMove(t, !1, r)) : t_slideMove(t, !1, r); s.setAttribute("data-slider-touch", ""), n = !1 } return !0 })), window.hammer.on("panend", (function () { y && i.dispatchEvent(h), t_slideMove(t, !1, r), n = !1 })) } } } } } } function t_slds_getCurrentTranslate(t) { var e = t.querySelector(".t-slds__items-wrapper"); if (e) { var s = getComputedStyle(e).transform; if (void 0 !== s && "" !== s) { var r = s.match(/\d+/g); if (null !== r) return parseInt(r[0], 10) } } } function t_slds_changeImageUrl(t) { var e = document.getElementById("allrecords"), s = e && "yes" === e.getAttribute("data-tilda-lazy"), r = t_slds__getRec(t), i; r && (i = s ? r.querySelectorAll(".t-slds__img:not([data-original])") : r.querySelectorAll(".t-slds__img"), Array.prototype.forEach.call(i, (function (t) { var e = t.getAttribute("data-src"); e && (t.setAttribute("src", e), t.removeAttribute("data-src")) }))) } function t_slds_onHammerLoad(t, e, s) { if ("function" == typeof window[t]) e(); else var r = Date.now(), i = setTimeout((function a() { var l = Date.now(); if ("function" != typeof window[t]) { if (l - r > 7e3) throw new Error(t + " is undefined"); i = setTimeout(a, s || 100) } else e() })) } function t_slds_fadeOut(t, e, s) { if ("none" !== t.style.display && !t.getAttribute("data-fadeout-timeout")) { var r = 1, i = parseInt(e), a, l = setInterval((function () { t.style.opacity = r, (r -= .1) <= .1 && (clearInterval(l), t.removeAttribute("data-fadeout-timeout"), t.style.display = "none", "function" == typeof s && s()) }), i > 0 ? i / 10 : 40); t.setAttribute("data-fadeout-timeout", l) } } function t_slds_fadeIn(t, e, s) { if (("1" !== getComputedStyle(t).opacity && "" !== getComputedStyle(t).opacity || "none" === getComputedStyle(t).display) && !t.getAttribute("data-fadein-timeout")) { var r = 0, i = parseInt(e), a = i > 0 ? i / 10 : 40; t.style.opacity = r, t.style.display = "block"; var l = setInterval((function () { t.style.opacity = r, (r += .1) >= 1 && (clearInterval(l), t.removeAttribute("data-fadein-timeout"), "function" == typeof s && s()) }), a); t.setAttribute("data-fadein-timeout", l) } } function t_slds_randomSortElements(t) { var e = Array.prototype.slice.call(t); if (!e.length) return []; e.sort((function () { return .5 - Math.random() })); var s = t[0].parentNode; return e.forEach((function (t) { s.appendChild(t) })), e } function t_slds__proccessVideo(t) { return new Promise((function (e, s) { t_onFuncLoad("t_video__createPlayer", (function () { t_video__createPlayer(t).then((function (t) { return e(t) })).catch((function (t) { return s(t) })) })) })) } function t_slds_getEventsForZeroBlock() { var t, e; return "function" == typeof window.CustomEvent ? (t = new CustomEvent("tildaSldsMoveSlideStart"), e = new CustomEvent("tildaSldsMoveSlideEnd")) : ((t = document.createEvent("CustomEvent")).initCustomEvent("tildaSldsMoveSlideStart", !0, !0), (e = document.createEvent("CustomEvent")).initCustomEvent("tildaSldsMoveSlideEnd", !0, !0)), { moveSlideStartEvent: t, moveSlideEndEvent: e } } function t_slds__getRec(t) { return "string" == typeof t ? document.querySelector("#rec" + t) : t instanceof Element ? t : t[0] } function t_triggerEvent(t, e) { var s; document.createEvent ? (s = document.createEvent("HTMLEvents")).initEvent(e, !0, !1) : document.createEventObject && ((s = document.createEventObject()).eventType = e), s.eventName = e, t.dispatchEvent ? t.dispatchEvent(s) : t.fireEvent ? t.fireEvent("on" + s.eventType, s) : t[e] ? t[e]() : t["on" + e] && t["on" + e]() } window.t_slds__isiOS = /iPhone|iPad|iPod/i.test(navigator.userAgent) || navigator.userAgent.indexOf("Macintosh") && "ontouchend" in document; var DEBUG = !1; function setImportantStyle(t, e, s) { t.style.setProperty(e, s, "important") } function getGalleryContainer() { var t = document.querySelector(".t-popup"); if (t) { var e = t.querySelector(".t-catalog__relevants__container, .t-store__relevants__container"); if (e) return e } return document.querySelector(".t-catalog__relevants__container, .t-store__relevants__container") } function applyBaseStyles(t) { for (var e = t.querySelectorAll(".js-product"), s = 0; s < e.length; s++)for (var r, i = e[s].querySelectorAll(".t-catalog__card__textwrapper, .t-store__card__textwrapper"), a = 0; a < i.length; a++) { var l = i[a]; setImportantStyle(l, "margin-bottom", "0px"), setImportantStyle(l, "margin-top", "auto"), setImportantStyle(l, "justify-content", "flex-start"); var d = l.querySelector(".js-catalog-prod-name, .js-store-prod-name"); d && (setImportantStyle(d, "display", "-webkit-box"), setImportantStyle(d, "-webkit-box-orient", "vertical"), setImportantStyle(d, "-webkit-line-clamp", "2"), setImportantStyle(d, "overflow", "hidden"), setImportantStyle(d, "text-overflow", "ellipsis"), setImportantStyle(d, "line-height", "1.5"), setImportantStyle(d, "max-height", "calc(1.5em * 2)"), setImportantStyle(d, "padding-bottom", "unset")); var o = l.querySelector(".js-catalog-prod-descr, .js-store-prod-descr"); o && (setImportantStyle(o, "display", "-webkit-box"), setImportantStyle(o, "-webkit-box-orient", "vertical"), setImportantStyle(o, "-webkit-line-clamp", "1"), setImportantStyle(o, "overflow", "hidden"), setImportantStyle(o, "text-overflow", "ellipsis"), setImportantStyle(o, "padding-bottom", "unset")) } DEBUG && console.info("Базовые стили применены.") } function getReferenceHeight() { var t = getGalleryContainer(); if (!t) return 0; t.offsetHeight; for (var e = t.querySelectorAll(".js-product"), s = 0; s < e.length; s++) { var r = e[s]; if ("none" !== window.getComputedStyle(r).display && 0 !== r.offsetHeight && r.querySelector(".js-product-img")) { var i = r.getBoundingClientRect().height; return DEBUG && console.info("Опорная карточка найдена. Высота:", i), i } } return DEBUG && console.info("Не найдена видимая карточка с изображением."), 0 } function updateNoImageCardHeights() { requestAnimationFrame((function () { var t = getReferenceHeight(); if (!(t <= 0)) { var e = getGalleryContainer(); if (e) for (var s = e.querySelectorAll(".js-product"), r = 0; r < s.length; r++) { var i = s[r]; i.querySelector(".js-product-img") ? i.style.height = "" : (i.style.cssText += "; height: " + t + "px !important;", DEBUG && console.info("Установлена высота для карточки без изображения:", t)) } } })) } function attachImageLoadListeners() { var t = getGalleryContainer(); if (t) for (var e = t.querySelectorAll(".js-product-img"), s = 0; s < e.length; s++) { var r = e[s]; r.complete || r.addEventListener("load", (function () { DEBUG && console.info("Изображение загрузилось, обновляем высоту"), updateNoImageCardHeights() })) } } function addEmptyDescrPlaceholder(t) { var e = t.querySelector(".js-catalog-prod-descr.t-catalog__card__descr, .js-store-prod-descr.t-store__card__descr"); if (e) { var s = getComputedStyle(e), r = e.getBoundingClientRect().height, i = s.paddingTop; t.querySelectorAll(".js-product").forEach((function (t) { if (!t.querySelector(".js-catalog-prod-descr.t-catalog__card__descr, .js-store-prod-descr.t-store__card__descr")) { var s = t.querySelector(".t-catalog__card__textwrapper, .t-store__card__textwrapper"), a = s && s.querySelector(".js-catalog-price-wrapper, .js-store-price-wrapper"); if (s && a) { var l = document.createElement("div"); l.className = e.className, l.style.setProperty("height", r + "px", "important"), l.style.setProperty("padding-top", i, "important"), l.style.setProperty("margin-bottom", "0px", "important"), l.style.setProperty("display", "-webkit-box", "important"), l.style.setProperty("-webkit-box-orient", "vertical", "important"), l.style.setProperty("-webkit-line-clamp", "1", "important"), l.style.setProperty("overflow", "hidden", "important"), l.style.setProperty("text-overflow", "ellipsis", "important"), s.insertBefore(l, a) } } })) } } function initGallery() { var t = getGalleryContainer(); if (t) { t.removeAttribute("data-styles-applied"), applyBaseStyles(t), t.dataset.stylesApplied = "true", addEmptyDescrPlaceholder(t), DEBUG && console.info("Инициализация галереи завершена."); for (var e = [500, 1e3, 1500], s = 0; s < e.length; s++) { var r; setTimeout((function () { attachImageLoadListeners(), updateNoImageCardHeights() }), e[s]) } } else DEBUG && console.info("Контейнер галереи не найден.") } function observePopup() { var t = document.querySelector(".t-popup"), e; t && ("IntersectionObserver" in window ? new IntersectionObserver((function (t, e) { for (var s = 0; s < t.length; s++) { var r; if (t[s].isIntersecting) { DEBUG && console.info("Попап видим. Инициализация галереи через 1500 мс"), e.disconnect(), setTimeout(initGallery, 1500); break } } })).observe(t) : setTimeout(initGallery, 1500)) } function onResize() { DEBUG && console.info("Resize – обновление высоты карточек"), updateNoImageCardHeights() } function onPopstate() { DEBUG && console.info("Popstate – инициализация галереи"), setTimeout(initGallery, 500) } function onPageshow(t) { t.persisted && (DEBUG && console.info("Pageshow (из кэша) – инициализация галереи"), initGallery()) } function onWindowLoad() { initGallery(), observePopup() } if (window.addEventListener("resize", onResize), window.addEventListener("popstate", onPopstate), window.addEventListener("pageshow", onPageshow), window.addEventListener("load", onWindowLoad), document.body && "MutationObserver" in window) { var domObserver = new MutationObserver((function () { initGallery() })); domObserver.observe(document.body, { childList: !0, subtree: !0 }) } var pollCount = 0, pollInterval = setInterval((function () { initGallery(), ++pollCount >= 20 && clearInterval(pollInterval) }), 500);
